\documentclass{article}

\usepackage[utf8]{inputenc}
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage[normalem]{ulem}

\usetikzlibrary{arrows.meta,calc,decorations.pathreplacing,shapes.geometric}
\tikzset{
    >=Stealth,
    er/.style={
        attr/.append style={align=center,draw,thick,ellipse,text width=2cm,text height=1.5ex,text depth=.25ex,font=\strut},
        entity/.append style={align=center,draw,thick,rectangle,text width=2cm,text height=2ex,text depth=.25ex,minimum height=1cm,font=\strut},
        rel/.append style={align=center,draw,thick,diamond,text width=2cm,text height=1.5ex,text depth=.25ex,font=\strut,fill=black!10,scale=0.65},
        isa/.append style={regular polygon, regular polygon sides=3,draw,thick,scale=0.65,font={ISA}},
        total/.append style={ultra thick},
        weak/.append style={ultra thick},
        once/.append style={->},
        strict/.append style={-Arc Barb[]},
        every edge/.append style={draw,thick}
    }
}

\newcommand{\key}[1]{\underline{\smash{#1}}}
\newcommand{\pkey}[1]{\dashuline{\smash{#1}}}
\newcommand{\mname}[1]{\mbox{\sf #1}}
\newcommand{\pnote}[1]{{\langle \text{#1} \rangle}}

\title{Assignment 1}
\author{Nguyen Gia Hien Tu - tun1}
\date{\today}

\begin{document}

\maketitle

\textbf{Analysis} \\

The first paragraph of the description is ignored when creating the ER diagram
since it is just an introduction.

The sentence ``First, the system will store information about several cinemas''
indicates that there is an entity Cinema for the diagram. ``Each cinema has
a unique name and anaddress'' shows that the entity Cinema has attributes name
and address. Although each cinema has a unique name, cinema names have changed
in the past. Thus, we cannot let the attribute name be the primary key. We cannot
let the attribute address be the primary key either since the location of a
cinema may change (e.g., moving the cinema to another place or expanding the
cinema). Thus, I believe it is better to add another attribute called cid, stands
for cinema id, and let this attribute be the primary key. Therefore, the Cinema
entity has three cid, name and address where cid is the primary key.

``Per cinema, the system will also maintain information per room'' illustrates
that the entity Room is a owned by the entity Cinema. In other words, Room is a
weak entity of Cinema since a room can only be uniquely defined when there is a
cinema corresponding with it. Since each room has a different room number, the
attribute room\_num is added to be the partial key for the entity Room. So, the
primary key for the entity Room is the pair (cid, room\_num). Based on the 
description, the entity also has attributes screen\_type, screen\_size,
projector\_type, sound\_system and accessibility. The examples of screen type,
projector type, sound system are ignored since we focus on the attributes rather
than the examples of each attribute when creating the diagram.

``This information is not only available for cinema visitors, but will also be
communicated to private partiesthat are looking to hire a room (e.g., for a
corporate event)'' is ignored since the visibility is not restricted to anyone
and also, the database is more for storing data rather than showing data.
``Finally, per room the system also needs to knowthe exact seat arrangement, as
the online system will allow customers to order tickets for specific seats''
indicates that the entity Seat is a weak entity of the entity Room since seat is
a part of the room. The sentence also shows that there is an entity Ticket that
has a relationship with Seat, this will be explain in details later. The next two
sentences of the description shows that the entity Seat should have attributes
row, seat\_num and reserved (which means reserved for disabled people). Since
only row or seat\_num cannot uniquely identify the seat, I combine the two
attributes into an attribute row\_and\_seat\_num and let it be the partial key
for the entity Seat. Thus, the primary key for the entity Seat is (cid, room\_
num, row\_and\_seat\_num).

``Each screening is assigned a single room'' depicts that there is a one-to-many
relationship from an entity Screening to the entity Room. The relationship name
is Room\_Assign and the
\begin{tikzpicture}[er]
    \path (0,0) edge[strict] (1,0); 
\end{tikzpicture}
arrow from the entity Screening to the relationship Room\_Assign shows that each
screening is associated with exactly one room while the
\begin{tikzpicture}[er]
    \path (0,0) edge (1,0);
\end{tikzpicture}
arrow from the entity Room to the relationship Room\_Assign shows that a room
can have multiple screenings. The Screening entity has attributes timeslot and
screening\_type. The explanation of three types of screening and how each type
affect the ticket price is ignored. ``For each public screening, the system keeps
track which films are shown. This film information is provided by the film
distributors in a standard format: for now, the system represents this external
information via an entity Film with an attribute fid'' depicts that there is a
relationship between the entity Screening and Film, the relationship is named
Show in the diagram. There is also the entity Film with the primary key attribute
fid, as stated in the description. The relationship between Screening and Film
is many-to-many since a screening can show multiple films and a film can be shown
in many screenings. ``If a screening will show multiple films (as part of special
screening), then each of these films will be shown in the same room'' is ingnored
because this can be inferred as many films are shown in a screening and a
screening is associated with exactly one room. ``\dots and the ticket of the
customer assign the same seat during each film'' shows that there is a one to
many relationship between an entity Ticket and the entity Seat.
 

\end{document}